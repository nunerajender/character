<% @model = Character::Settings::Variable %>

<div class='chr-form-small'>
  <%= simple_form_for :objects, url: @action_url, method: :post, class: :default do |form| %>
    <%= hidden_field_tag :class_name, @model.to_s %>
    <% ::Settings.group(@settings_group_name).each do |name, object| %>

      <%= form.simple_fields_for "[]", object.stored_object do |f| %>
        <% case object.type %>
        <% when "file" %>
          <div class='chr-settings-file-upload <%= f.object.name.parameterize %>'>
            <label class='file optional'><%= f.object.name %></label>
            <%= link_to object.value, object.value, target: '_blank' %>
            <%= f.input :file,
                        as: :file,
                        label: false %>
          </div>
        <% when "text" %>
          <%= f.input :value,
                       as: :text,
                       label: f.object.name,
                       placeholder: object.description,
                       wrapper_class: f.object.name.parameterize,
                       input_html: { value: object.value, rows: 3 } %>
        <% when "redactor" %>
          <%= f.input :value,
                       as: :text,
                       label: f.object.name,
                       placeholder: object.description,
                       wrapper_class: f.object.name.parameterize,
                       input_html: { value: object.value, rows: 3, class: 'character-redactor' } %>
        <% else %>
          <%= f.input :value,
                       label: f.object.name,
                       placeholder: object.description,
                       wrapper_class: f.object.name.parameterize,
                       input_html: { value: object.value } %>
        <% end %>
      <% end %>

    <% end %>
  <% end %>
</div>